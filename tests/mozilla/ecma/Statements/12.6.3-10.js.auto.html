<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>12.6.3-10.js</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">12.6.3-10.js&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/* The contents of this file are subject to the Netscape Public
 * License Version 1.1 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of
 * the License at <a href="http://www.mozilla.org/NPL/">http://www.mozilla.org/NPL/</a>
 *
 * Software distributed under the License is distributed on an &quot;AS
 * IS&quot; basis, WITHOUT WARRANTY OF ANY KIND, either express or
 * implied. See the License for the specific language governing
 * rights and limitations under the License.
 *
 * The Original Code is Mozilla Communicator client code, released March
 * 31, 1998.
 *
 * The Initial Developer of the Original Code is Netscape Communications
 * Corporation. Portions created by Netscape are
 * Copyright (C) 1998 Netscape Communications Corporation. All
 * Rights Reserved.
 *
 * Contributor(s): 
 * 
 */</span>
<span class="enscript-comment">/**
    File Name:          12.6.3-10.js
    ECMA Section:       12.6.3 The for...in Statement
    Description:
    The production IterationStatement : for ( LeftHandSideExpression in Expression )
    Statement is evaluated as follows:

    1.  Evaluate the Expression.
    2.  Call GetValue(Result(1)).
    3.  Call ToObject(Result(2)).
    4.  Let C be &quot;normal completion&quot;.
    5.  Get the name of the next property of Result(3) that doesn't have the
        DontEnum attribute. If there is no such property, go to step 14.
    6.  Evaluate the LeftHandSideExpression (it may be evaluated repeatedly).
    7.  Call PutValue(Result(6), Result(5)).  PutValue( V, W ):
        1.  If Type(V) is not Reference, generate a runtime error.
        2.  Call GetBase(V).
        3.  If Result(2) is null, go to step 6.
        4.  Call the [[Put]] method of Result(2), passing GetPropertyName(V)
            for the property name and W for the value.
        5.  Return.
        6.  Call the [[Put]] method for the global object, passing
            GetPropertyName(V) for the property name and W for the value.
        7.  Return.
    8.  Evaluate Statement.
    9.  If Result(8) is a value completion, change C to be &quot;normal completion
        after value V&quot; where V is the value carried by Result(8).
    10. If Result(8) is a break completion, go to step 14.
    11. If Result(8) is a continue completion, go to step 5.
    12. If Result(8) is a return completion, return Result(8).
    13. Go to step 5.
    14. Return C.

    Author:             <a href="mailto:christine@netscape.com">christine@netscape.com</a>
    Date:               11 september 1997
*/</span>
    <span class="enscript-keyword">var</span> SECTION = <span class="enscript-string">&quot;12.6.3-10&quot;</span>;
    <span class="enscript-keyword">var</span> VERSION = <span class="enscript-string">&quot;ECMA_1&quot;</span>;
    startTest();
    <span class="enscript-keyword">var</span> TITLE   = <span class="enscript-string">&quot;The for..in statment&quot;</span>;

    writeHeaderToLog( SECTION + <span class="enscript-string">&quot; &quot;</span>+ TITLE);

    <span class="enscript-keyword">var</span> testcases = <span class="enscript-keyword">new</span> Array();

    <span class="enscript-comment">//  for ( LeftHandSideExpression in Expression )
</span>    <span class="enscript-comment">//  LeftHandSideExpression:NewExpression:MemberExpression
</span>
    <span class="enscript-keyword">var</span> count = 0;
    <span class="enscript-keyword">function</span> <span class="enscript-function-name">f</span>() {     count++; <span class="enscript-keyword">return</span> <span class="enscript-keyword">new</span> Array(<span class="enscript-string">&quot;h&quot;</span>,<span class="enscript-string">&quot;e&quot;</span>,<span class="enscript-string">&quot;l&quot;</span>,<span class="enscript-string">&quot;l&quot;</span>,<span class="enscript-string">&quot;o&quot;</span>); }

    <span class="enscript-keyword">var</span> result = <span class="enscript-string">&quot;&quot;</span>;
    <span class="enscript-keyword">for</span> ( p <span class="enscript-keyword">in</span> f() ) { result += f()[p] };

    testcases[testcases.length] = <span class="enscript-keyword">new</span> TestCase( SECTION,
        <span class="enscript-string">&quot;count = 0; result = \&quot;\&quot;; &quot;</span>+
        <span class="enscript-string">&quot;function f() { count++; return new Array(\&quot;h\&quot;,\&quot;e\&quot;,\&quot;l\&quot;,\&quot;l\&quot;,\&quot;o\&quot;); }&quot;</span>+
        <span class="enscript-string">&quot;for ( p in f() ) { result += f()[p] }; count&quot;</span>,
        6,
        count );

    testcases[testcases.length] = <span class="enscript-keyword">new</span> TestCase( SECTION,
        <span class="enscript-string">&quot;result&quot;</span>,
        <span class="enscript-string">&quot;hello&quot;</span>,
        result );

    <span class="enscript-comment">//  LeftHandSideExpression:NewExpression:MemberExpression [ Expression ]
</span>    <span class="enscript-comment">//  LeftHandSideExpression:NewExpression:MemberExpression . Identifier
</span>    <span class="enscript-comment">//  LeftHandSideExpression:NewExpression:new MemberExpression Arguments
</span>    <span class="enscript-comment">//  LeftHandSideExpression:NewExpression:PrimaryExpression:( Expression )
</span>    <span class="enscript-comment">//  LeftHandSideExpression:CallExpression:MemberExpression Arguments
</span>    <span class="enscript-comment">//  LeftHandSideExpression:CallExpression Arguments
</span>    <span class="enscript-comment">//  LeftHandSideExpression:CallExpression [ Expression ]
</span>    <span class="enscript-comment">//  LeftHandSideExpression:CallExpression . Identifier
</span>
    test();

<span class="enscript-keyword">function</span> <span class="enscript-function-name">test</span>() {
    <span class="enscript-keyword">for</span> ( tc=0; tc &lt; testcases.length; tc++ ) {
        testcases[tc].passed = writeTestCaseResult(
                            testcases[tc].expect,
                            testcases[tc].actual,
                            testcases[tc].description +<span class="enscript-string">&quot; = &quot;</span>+
                            testcases[tc].actual );

        testcases[tc].reason += ( testcases[tc].passed ) ? <span class="enscript-string">&quot;&quot;</span> : <span class="enscript-string">&quot;wrong value &quot;</span>;
    }
    stopTest();
    <span class="enscript-keyword">return</span> ( testcases );
}

</pre>
<hr />
</body></html>