<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>10.1.8-1.js</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">10.1.8-1.js&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/* The contents of this file are subject to the Netscape Public
 * License Version 1.1 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of
 * the License at <a href="http://www.mozilla.org/NPL/">http://www.mozilla.org/NPL/</a>
 *
 * Software distributed under the License is distributed on an &quot;AS
 * IS&quot; basis, WITHOUT WARRANTY OF ANY KIND, either express or
 * implied. See the License for the specific language governing
 * rights and limitations under the License.
 *
 * The Original Code is Mozilla Communicator client code, released March
 * 31, 1998.
 *
 * The Initial Developer of the Original Code is Netscape Communications
 * Corporation. Portions created by Netscape are
 * Copyright (C) 1998 Netscape Communications Corporation. All
 * Rights Reserved.
 *
 * Contributor(s): 
 * 
 */</span>
<span class="enscript-comment">/**
    File Name:          10.1.8
    ECMA Section:       Arguments Object
    Description:

    When control enters an execution context for declared function code,
    anonymous code, or implementation-supplied code, an arguments object is
    created and initialized as follows:

    The [[Prototype]] of the arguments object is to the original Object
    prototype object, the one that is the initial value of Object.prototype
    (section 15.2.3.1).

    A property is created with name callee and property attributes {DontEnum}.
    The initial value of this property is the function object being executed.
    This allows anonymous functions to be recursive.

    A property is created with name length and property attributes {DontEnum}.
    The initial value of this property is the number of actual parameter values
    supplied by the caller.

    For each non-negative integer, iarg, less than the value of the length
    property, a property is created with name ToString(iarg) and property
    attributes { DontEnum }. The initial value of this property is the value
    of the corresponding actual parameter supplied by the caller. The first
    actual parameter value corresponds to iarg = 0, the second to iarg = 1 and
    so on. In the case when iarg is less than the number of formal parameters
    for the function object, this property shares its value with the
    corresponding property of the activation object. This means that changing
    this property changes the corresponding property of the activation object
    and vice versa. The value sharing mechanism depends on the implementation.

    Author:             <a href="mailto:christine@netscape.com">christine@netscape.com</a>
    Date:               12 november 1997
*/</span>

    <span class="enscript-keyword">var</span> SECTION = <span class="enscript-string">&quot;10.1.8&quot;</span>;
    <span class="enscript-keyword">var</span> VERSION = <span class="enscript-string">&quot;ECMA_1&quot;</span>;
    startTest();
    <span class="enscript-keyword">var</span> TITLE   = <span class="enscript-string">&quot;Arguments Object&quot;</span>;

    writeHeaderToLog( SECTION + <span class="enscript-string">&quot; &quot;</span>+ TITLE);

    <span class="enscript-keyword">var</span> testcases = <span class="enscript-keyword">new</span> Array();

    <span class="enscript-keyword">var</span> ARG_STRING = <span class="enscript-string">&quot;value of the argument property&quot;</span>;

    testcases[tc++] = <span class="enscript-keyword">new</span> TestCase( SECTION,
                                    <span class="enscript-string">&quot;GetCallee()&quot;</span>,
                                    GetCallee,
                                    GetCallee() );

    <span class="enscript-keyword">var</span> LIMIT = 100;

    <span class="enscript-keyword">for</span> ( <span class="enscript-keyword">var</span> i = 0, args = <span class="enscript-string">&quot;&quot;</span> ; i &lt; LIMIT; i++ ) {
        args += String(i) + ( i+1 &lt; LIMIT ? <span class="enscript-string">&quot;,&quot;</span> : <span class="enscript-string">&quot;&quot;</span> );

    }

    <span class="enscript-keyword">var</span> LENGTH = <span class="enscript-builtin">eval</span>( <span class="enscript-string">&quot;GetLength(&quot;</span>+ args +<span class="enscript-string">&quot;)&quot;</span> );

    testcases[tc++] = <span class="enscript-keyword">new</span> TestCase( SECTION,
                                    <span class="enscript-string">&quot;GetLength(&quot;</span>+args+<span class="enscript-string">&quot;)&quot;</span>,
                                    100,
                                    LENGTH );

    <span class="enscript-keyword">var</span> ARGUMENTS = <span class="enscript-builtin">eval</span>( <span class="enscript-string">&quot;GetArguments( &quot;</span> +args+<span class="enscript-string">&quot;)&quot;</span> );

    <span class="enscript-keyword">for</span> ( <span class="enscript-keyword">var</span> i = 0; i &lt; 100; i++ ) {
        testcases[tc++] = <span class="enscript-keyword">new</span> TestCase( SECTION,
                                        <span class="enscript-string">&quot;GetArguments(&quot;</span>+args+<span class="enscript-string">&quot;)[&quot;</span>+i+<span class="enscript-string">&quot;]&quot;</span>,
                                        i,
                                        ARGUMENTS[i] );
    }

    test();

<span class="enscript-keyword">function</span> <span class="enscript-function-name">TestFunction</span>() {
    <span class="enscript-keyword">var</span> arg_proto = arguments.__proto__;
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">GetCallee</span>() {
    <span class="enscript-keyword">var</span> c = arguments.callee;
    <span class="enscript-keyword">return</span> c;
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">GetArguments</span>() {
    <span class="enscript-keyword">var</span> a = arguments;
    <span class="enscript-keyword">return</span> a;
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">GetLength</span>() {
    <span class="enscript-keyword">var</span> l = arguments.length;
    <span class="enscript-keyword">return</span> l;
}

<span class="enscript-keyword">function</span> <span class="enscript-function-name">AnotherTestFunction</span>() {
    <span class="enscript-keyword">this</span>.__proto__ = <span class="enscript-keyword">new</span> Prototype();
    <span class="enscript-keyword">return</span> <span class="enscript-keyword">this</span>;
}

<span class="enscript-keyword">function</span> <span class="enscript-function-name">test</span>() {
    <span class="enscript-keyword">for</span> ( tc=0; tc &lt; testcases.length; tc++ ) {
        testcases[tc].passed = writeTestCaseResult(
                            testcases[tc].expect,
                            testcases[tc].actual,
                            testcases[tc].description +<span class="enscript-string">&quot; = &quot;</span>+
                            testcases[tc].actual );

        testcases[tc].reason += ( testcases[tc].passed ) ? <span class="enscript-string">&quot;&quot;</span> : <span class="enscript-string">&quot;wrong value &quot;</span>;
    }
    stopTest();
    <span class="enscript-keyword">return</span> ( testcases );
}
</pre>
<hr />
</body></html>