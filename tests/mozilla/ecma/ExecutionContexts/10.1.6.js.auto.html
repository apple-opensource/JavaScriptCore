<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>10.1.6.js</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">10.1.6.js&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/* The contents of this file are subject to the Netscape Public
 * License Version 1.1 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of
 * the License at <a href="http://www.mozilla.org/NPL/">http://www.mozilla.org/NPL/</a>
 *
 * Software distributed under the License is distributed on an &quot;AS
 * IS&quot; basis, WITHOUT WARRANTY OF ANY KIND, either express or
 * implied. See the License for the specific language governing
 * rights and limitations under the License.
 *
 * The Original Code is Mozilla Communicator client code, released March
 * 31, 1998.
 *
 * The Initial Developer of the Original Code is Netscape Communications
 * Corporation. Portions created by Netscape are
 * Copyright (C) 1998 Netscape Communications Corporation. All
 * Rights Reserved.
 *
 * Contributor(s): 
 * 
 */</span>
<span class="enscript-comment">/**
    File Name:          10.1.6
    ECMA Section:       Activation Object
    Description:

    If the function object being invoked has an arguments property, let x be
    the value of that property; the activation object is also given an internal
    property [[OldArguments]] whose initial value is x; otherwise, an arguments
    property is created for the function object but the activation object is
    not given an [[OldArguments]] property. Next, arguments object described
    below (the same one stored in the arguments property of the activation
    object) is used as the new value of the arguments property of the function
    object. This new value is installed even if the arguments property already
    exists and has the ReadOnly attribute (as it will for native Function
    objects). (These actions are taken to provide compatibility with a form of
    program syntax that is now discouraged: to access the arguments object for
    function f within the body of f by using the expression f.arguments.
    The recommended way to access the arguments object for function f within
    the body of f is simply to refer to the variable arguments.)

    Author:             <a href="mailto:christine@netscape.com">christine@netscape.com</a>
    Date:               12 november 1997
*/</span>

    <span class="enscript-keyword">var</span> SECTION = <span class="enscript-string">&quot;10.1.6&quot;</span>;
    <span class="enscript-keyword">var</span> VERSION = <span class="enscript-string">&quot;ECMA_1&quot;</span>;
    startTest();
    <span class="enscript-keyword">var</span> TITLE   = <span class="enscript-string">&quot;Activation Object&quot;</span>;

    writeHeaderToLog( SECTION + <span class="enscript-string">&quot; &quot;</span>+ TITLE);

    <span class="enscript-keyword">var</span> testcases = <span class="enscript-keyword">new</span> Array();

    <span class="enscript-keyword">var</span> arguments = <span class="enscript-string">&quot;FAILED!&quot;</span>;

    <span class="enscript-keyword">var</span> ARG_STRING = <span class="enscript-string">&quot;value of the argument property&quot;</span>;

    testcases[tc++] = <span class="enscript-keyword">new</span> TestCase( SECTION,
                                    <span class="enscript-string">&quot;(new TestObject(0,1,2,3,4,5)).length&quot;</span>,
                                    6,
                                    (<span class="enscript-keyword">new</span> TestObject(0,1,2,3,4,5)).length );

    <span class="enscript-keyword">for</span> ( i = 0; i &lt; 6; i++ ) {

        testcases[tc++] = <span class="enscript-keyword">new</span> TestCase( SECTION,
                                        <span class="enscript-string">&quot;(new TestObject(0,1,2,3,4,5))[&quot;</span>+i+<span class="enscript-string">&quot;]&quot;</span>,
                                        i,
                                        (<span class="enscript-keyword">new</span> TestObject(0,1,2,3,4,5))[i]);
    }


    <span class="enscript-comment">//    The current object already has an arguments property.
</span>
    testcases[tc++] = <span class="enscript-keyword">new</span> TestCase( SECTION,
                                    <span class="enscript-string">&quot;(new AnotherTestObject(1,2,3)).arguments&quot;</span>,
                                    ARG_STRING,
                                    (<span class="enscript-keyword">new</span> AnotherTestObject(1,2,3)).arguments );

    <span class="enscript-comment">//  The function invoked with [[Call]]
</span>
    testcases[tc++] = <span class="enscript-keyword">new</span> TestCase( SECTION,
                                    <span class="enscript-string">&quot;TestFunction(1,2,3)&quot;</span>,
                                    ARG_STRING,
                                    TestFunction() + <span class="enscript-string">''</span> );


    test();



<span class="enscript-keyword">function</span> <span class="enscript-function-name">Prototype</span>() {
    <span class="enscript-keyword">this</span>.arguments = ARG_STRING;
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">TestObject</span>() {
    <span class="enscript-keyword">this</span>.__proto__ = <span class="enscript-keyword">new</span> Prototype();
    <span class="enscript-keyword">return</span> arguments;
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">AnotherTestObject</span>() {
    <span class="enscript-keyword">this</span>.__proto__ = <span class="enscript-keyword">new</span> Prototype();
    <span class="enscript-keyword">return</span> <span class="enscript-keyword">this</span>;
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">TestFunction</span>() {
    arguments = ARG_STRING;
    <span class="enscript-keyword">return</span> arguments;
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">AnotherTestFunction</span>() {
    <span class="enscript-keyword">this</span>.__proto__ = <span class="enscript-keyword">new</span> Prototype();
    <span class="enscript-keyword">return</span> <span class="enscript-keyword">this</span>;
}

<span class="enscript-keyword">function</span> <span class="enscript-function-name">test</span>() {
    <span class="enscript-keyword">for</span> ( tc=0; tc &lt; testcases.length; tc++ ) {
        testcases[tc].passed = writeTestCaseResult(
                            testcases[tc].expect,
                            testcases[tc].actual,
                            testcases[tc].description +<span class="enscript-string">&quot; = &quot;</span>+
                            testcases[tc].actual );

        testcases[tc].reason += ( testcases[tc].passed ) ? <span class="enscript-string">&quot;&quot;</span> : <span class="enscript-string">&quot;wrong value &quot;</span>;
    }
    stopTest();
    <span class="enscript-keyword">return</span> ( testcases );
}
</pre>
<hr />
</body></html>