<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>browser.js</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">browser.js&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
* The contents of this file are subject to the Netscape Public
* License Version 1.1 (the &quot;License&quot;); you may not use this file
* except in compliance with the License. You may obtain a copy of
* the License at <a href="http://www.mozilla.org/NPL/">http://www.mozilla.org/NPL/</a>
*
* Software distributed under the License is distributed on an &quot;AS
* IS&quot; basis, WITHOUT WARRANTY OF ANY KIND, either express or
* implied. See the License for the specific language governing
* rights and limitations under the License.
*
* The Original Code is mozilla.org code.
*
* The Initial Developer of the Original Code is Netscape
* Communications Corporation.  Portions created by Netscape are
* Copyright (C) 1998 Netscape Communications Corporation. All
* Rights Reserved.
*
* Contributor(s): 
*/</span>

<span class="enscript-comment">/*
 * JavaScript test library shared functions file for running the tests
 * in the browser.  Overrides the shell's print function with document.write
 * and make everything HTML pretty.
 *
 * To run the tests in the browser, use the mkhtml.pl script to generate
 * html pages that include the shell.js, browser.js (this file), and the
 * test js file in script tags.
 *
 * The source of the page that is generated should look something like this:
 *      &lt;script src=&quot;./../shell.js&quot;&gt;&lt;/script&gt;
 *      &lt;script src=&quot;./../browser.js&quot;&gt;&lt;/script&gt;
 *      &lt;script src=&quot;./mytest.js&quot;&gt;&lt;/script&gt;
 */</span>

onerror = err;

<span class="enscript-keyword">function</span> <span class="enscript-function-name">startTest</span>() {
    <span class="enscript-keyword">if</span> ( BUGNUMBER ) {
        writeLineToLog (<span class="enscript-string">&quot;BUGNUMBER: &quot;</span> + BUGNUMBER );
    }

    testcases = <span class="enscript-keyword">new</span> Array();
    tc = 0;
}

<span class="enscript-keyword">function</span> <span class="enscript-function-name">writeLineToLog</span>( string ) {
    document.write( string + <span class="enscript-string">&quot;&lt;br&gt;\n&quot;</span>);
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">writeHeaderToLog</span>( string ) {
    document.write( <span class="enscript-string">&quot;&lt;h2&gt;&quot;</span> + string + <span class="enscript-string">&quot;&lt;/h2&gt;&quot;</span> );
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">stopTest</span>() {
    <span class="enscript-keyword">var</span> gc;
    <span class="enscript-keyword">if</span> ( gc != undefined ) {
        gc();
    }
    document.write( <span class="enscript-string">&quot;&lt;hr&gt;&quot;</span> );
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">writeFormattedResult</span>( expect, actual, string, passed ) {
    <span class="enscript-keyword">var</span> s = <span class="enscript-string">&quot;&lt;tt&gt;&quot;</span>+ string ;
    s += <span class="enscript-string">&quot;&lt;b&gt;&quot;</span> ;
    s += ( passed ) ? <span class="enscript-string">&quot;&lt;font color=#009900&gt; &amp;nbsp;&quot;</span> + PASSED
                    : <span class="enscript-string">&quot;&lt;font color=#aa0000&gt;&amp;nbsp;&quot;</span> +  FAILED + expect + <span class="enscript-string">&quot;&lt;/tt&gt;&quot;</span>;
    writeLineToLog( s + <span class="enscript-string">&quot;&lt;/font&gt;&lt;/b&gt;&lt;/tt&gt;&quot;</span> );
    <span class="enscript-keyword">return</span> passed;
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">err</span>( msg, page, line ) {
    writeLineToLog( <span class="enscript-string">&quot;Test failed with the message: &quot;</span> + msg );

    testcases[tc].actual = <span class="enscript-string">&quot;error&quot;</span>;
    testcases[tc].reason = msg;
    writeTestCaseResult( testcases[tc].expect,
                         testcases[tc].actual,
                         testcases[tc].description +<span class="enscript-string">&quot; = &quot;</span>+ testcases[tc].actual +
                         <span class="enscript-string">&quot;: &quot;</span> + testcases[tc].reason );
    stopTest();
    <span class="enscript-keyword">return</span> <span class="enscript-keyword">true</span>;
}
</pre>
<hr />
</body></html>