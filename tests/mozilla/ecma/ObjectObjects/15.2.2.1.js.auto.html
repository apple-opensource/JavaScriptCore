<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>15.2.2.1.js</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">15.2.2.1.js&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/* The contents of this file are subject to the Netscape Public
 * License Version 1.1 (the &quot;License&quot;); you may not use this file
 * except in compliance with the License. You may obtain a copy of
 * the License at <a href="http://www.mozilla.org/NPL/">http://www.mozilla.org/NPL/</a>
 *
 * Software distributed under the License is distributed on an &quot;AS
 * IS&quot; basis, WITHOUT WARRANTY OF ANY KIND, either express or
 * implied. See the License for the specific language governing
 * rights and limitations under the License.
 *
 * The Original Code is Mozilla Communicator client code, released March
 * 31, 1998.
 *
 * The Initial Developer of the Original Code is Netscape Communications
 * Corporation. Portions created by Netscape are
 * Copyright (C) 1998 Netscape Communications Corporation. All
 * Rights Reserved.
 *
 * Contributor(s): 
 * 
 */</span>
<span class="enscript-comment">/**
    File Name:          15.2.2.1.js
    ECMA Section:       15.2.2.1 The Object Constructor:  new Object( value )

    1.If the type of the value is not Object, go to step 4.
    2.If the value is a native ECMAScript object, do not create a new object; simply return value.
    3.If the value is a host object, then actions are taken and a result is returned in an
      implementation-dependent manner that may depend on the host object.
    4.If the type of the value is String, return ToObject(value).
    5.If the type of the value is Boolean, return ToObject(value).
    6.If the type of the value is Number, return ToObject(value).
    7.(The type of the value must be Null or Undefined.) Create a new native ECMAScript object.
      The [[Prototype]] property of the newly constructed object is set to the Object prototype object.
      The [[Class]] property of the newly constructed object is set to &quot;Object&quot;.
      The newly constructed object has no [[Value]] property.
      Return the newly created native object.

    Description:        This does not test cases where the object is a host object.
    Author:             <a href="mailto:christine@netscape.com">christine@netscape.com</a>
    Date:               7 october 1997
*/</span>

    <span class="enscript-keyword">var</span> SECTION = <span class="enscript-string">&quot;15.2.2.1&quot;</span>;
    <span class="enscript-keyword">var</span> VERSION = <span class="enscript-string">&quot;ECMA_1&quot;</span>;
    startTest();
    <span class="enscript-keyword">var</span> TITLE   = <span class="enscript-string">&quot;new Object( value )&quot;</span>;

    writeHeaderToLog( SECTION + <span class="enscript-string">&quot; &quot;</span>+ TITLE);

    <span class="enscript-keyword">var</span> testcases = getTestCases();
    test();

<span class="enscript-keyword">function</span> <span class="enscript-function-name">getTestCases</span>() {
    <span class="enscript-keyword">var</span> array = <span class="enscript-keyword">new</span> Array();
    <span class="enscript-keyword">var</span> item = 0;

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(null)&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,           typeof <span class="enscript-keyword">new</span> Object(<span class="enscript-keyword">null</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = new Object(null); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Object]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(null); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(void 0)&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,           typeof <span class="enscript-keyword">new</span> Object(<span class="enscript-keyword">void</span> 0) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = new Object(new Object(void 0)); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Object]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(new Object(void 0)); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object('string')&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,           typeof <span class="enscript-keyword">new</span> Object(<span class="enscript-string">'string'</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object('string'); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object String]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object('string'); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object('string').valueOf()&quot;</span>,  <span class="enscript-string">&quot;string&quot;</span>,           (<span class="enscript-keyword">new</span> Object(<span class="enscript-string">'string'</span>)).valueOf() );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object('')&quot;</span>,            <span class="enscript-string">&quot;object&quot;</span>,           typeof <span class="enscript-keyword">new</span> Object(<span class="enscript-string">''</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object(''); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object String]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(''); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object('').valueOf()&quot;</span>,        <span class="enscript-string">&quot;&quot;</span>,                 (<span class="enscript-keyword">new</span> Object(<span class="enscript-string">''</span>)).valueOf() );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(Number.NaN)&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,                 typeof <span class="enscript-keyword">new</span> Object(Number.NaN) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object(Number.NaN); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Number]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(Number.NaN); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object(Number.NaN).valueOf()&quot;</span>,  Number.NaN,               (<span class="enscript-keyword">new</span> Object(Number.NaN)).valueOf() );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(0)&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,                 typeof <span class="enscript-keyword">new</span> Object(0) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object(0); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Number]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(0); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object(0).valueOf()&quot;</span>,  0,               (<span class="enscript-keyword">new</span> Object(0)).valueOf() );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(-0)&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,                 typeof <span class="enscript-keyword">new</span> Object(-0) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object(-0); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Number]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(-0); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object(-0).valueOf()&quot;</span>,  -0,               (<span class="enscript-keyword">new</span> Object(-0)).valueOf() );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(1)&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,                 typeof <span class="enscript-keyword">new</span> Object(1) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object(1); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Number]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(1); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object(1).valueOf()&quot;</span>,  1,               (<span class="enscript-keyword">new</span> Object(1)).valueOf() );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(-1)&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,                 typeof <span class="enscript-keyword">new</span> Object(-1) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object(-1); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Number]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(-1); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object(-1).valueOf()&quot;</span>,  -1,               (<span class="enscript-keyword">new</span> Object(-1)).valueOf() );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(true)&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,                 typeof <span class="enscript-keyword">new</span> Object(<span class="enscript-keyword">true</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object(true); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Boolean]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(true); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object(true).valueOf()&quot;</span>,  <span class="enscript-keyword">true</span>,               (<span class="enscript-keyword">new</span> Object(<span class="enscript-keyword">true</span>)).valueOf() );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(false)&quot;</span>,      <span class="enscript-string">&quot;object&quot;</span>,              typeof <span class="enscript-keyword">new</span> Object(<span class="enscript-keyword">false</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object(false); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Boolean]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(false); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object(false).valueOf()&quot;</span>,  <span class="enscript-keyword">false</span>,                 (<span class="enscript-keyword">new</span> Object(<span class="enscript-keyword">false</span>)).valueOf() );

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;typeof new Object(Boolean())&quot;</span>,         <span class="enscript-string">&quot;object&quot;</span>,               typeof <span class="enscript-keyword">new</span> Object(Boolean()) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;MYOB = (new Object(Boolean()); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>,  <span class="enscript-string">&quot;[object Boolean]&quot;</span>,   <span class="enscript-builtin">eval</span>(<span class="enscript-string">&quot;MYOB = new Object(Boolean()); MYOB.toString = Object.prototype.toString; MYOB.toString()&quot;</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION,  <span class="enscript-string">&quot;(new Object(Boolean()).valueOf()&quot;</span>,     Boolean(),              (<span class="enscript-keyword">new</span> Object(Boolean())).valueOf() );


    <span class="enscript-keyword">var</span> myglobal    = <span class="enscript-keyword">this</span>;
    <span class="enscript-keyword">var</span> myobject    = <span class="enscript-keyword">new</span> Object( <span class="enscript-string">&quot;my new object&quot;</span> );
    <span class="enscript-keyword">var</span> myarray     = <span class="enscript-keyword">new</span> Array();
    <span class="enscript-keyword">var</span> myboolean   = <span class="enscript-keyword">new</span> Boolean();
    <span class="enscript-keyword">var</span> mynumber    = <span class="enscript-keyword">new</span> Number();
    <span class="enscript-keyword">var</span> mystring    = <span class="enscript-keyword">new</span> String();
    <span class="enscript-keyword">var</span> myobject    = <span class="enscript-keyword">new</span> Object();
    <span class="enscript-keyword">var</span> myfunction  = <span class="enscript-keyword">new</span> Function( <span class="enscript-string">&quot;x&quot;</span>, <span class="enscript-string">&quot;return x&quot;</span>);
    <span class="enscript-keyword">var</span> mymath      = <span class="enscript-builtin">Math</span>;

    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION, <span class="enscript-string">&quot;myglobal = new Object( this )&quot;</span>,                     myglobal,       <span class="enscript-keyword">new</span> Object(<span class="enscript-keyword">this</span>) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION, <span class="enscript-string">&quot;myobject = new Object('my new object'); new Object(myobject)&quot;</span>,            myobject,       <span class="enscript-keyword">new</span> Object(myobject) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION, <span class="enscript-string">&quot;myarray = new Array(); new Object(myarray)&quot;</span>,        myarray,        <span class="enscript-keyword">new</span> Object(myarray) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION, <span class="enscript-string">&quot;myboolean = new Boolean(); new Object(myboolean)&quot;</span>,  myboolean,      <span class="enscript-keyword">new</span> Object(myboolean) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION, <span class="enscript-string">&quot;mynumber = new Number(); new Object(mynumber)&quot;</span>,     mynumber,       <span class="enscript-keyword">new</span> Object(mynumber) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION, <span class="enscript-string">&quot;mystring = new String9); new Object(mystring)&quot;</span>,     mystring,       <span class="enscript-keyword">new</span> Object(mystring) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION, <span class="enscript-string">&quot;myobject = new Object(); new Object(mynobject)&quot;</span>,    myobject,       <span class="enscript-keyword">new</span> Object(myobject) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION, <span class="enscript-string">&quot;myfunction = new Function(); new Object(myfunction)&quot;</span>, myfunction,   <span class="enscript-keyword">new</span> Object(myfunction) );
    array[item++] = <span class="enscript-keyword">new</span> TestCase( SECTION, <span class="enscript-string">&quot;mymath = Math; new Object(mymath)&quot;</span>,                 mymath,         <span class="enscript-keyword">new</span> Object(mymath) );

    <span class="enscript-keyword">return</span> ( array );
}
<span class="enscript-keyword">function</span> <span class="enscript-function-name">test</span>() {
    <span class="enscript-keyword">for</span> (tc = 0 ; tc &lt; testcases.length; tc++ ) {
        testcases[tc].passed = writeTestCaseResult(
                            testcases[tc].expect,
                            testcases[tc].actual,
                            testcases[tc].description +<span class="enscript-string">&quot; = &quot;</span>+ testcases[tc].actual );
        testcases[tc].reason += ( testcases[tc].passed ) ? <span class="enscript-string">&quot;&quot;</span> : <span class="enscript-string">&quot;wrong value &quot;</span>;

    }

    stopTest();
    <span class="enscript-keyword">return</span> ( testcases );
}
</pre>
<hr />
</body></html>